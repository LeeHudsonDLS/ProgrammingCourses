#! Generated by VisualDCT v2.6
#! DBDSTART
#! DBD("/home/jjc62351/ProgrammingCourses/EPICS/course/basicIOCTest/ioc/dbd/basicIOCTest.dbd")
#! DBDEND


record(calc, "$(user):function") {
  field(SCAN, "Passive")
  field(CALC, "(0.0000001*SIN(1*(A%(100/1))*2*0.031415927))")
  field(INPA, "$(user):counter")
  field(PREC, "8")
}

record(calc, "$(user):counter") {
  field(SCAN, ".1 second")
  field(FLNK, "$(user):function")
  field(CALC, "A+1")
  field(INPA, "$(user):counter")
}

record(mbbo, "$(user):testMBBO") {
  field(PINI, "YES")
  field(DTYP, "Soft Channel")
  field(DOL, "0")
  field(OMSL, "supervisory")
  field(NOBT, "4")
  field(ZRVL, "0")
  field(ONVL, "1")
  field(TWVL, "2")
  field(THVL, "3")
  field(FRVL, "4")
  field(FVVL, "5")
  field(SXVL, "6")
  field(SVVL, "8")
  field(EIVL, "9")
  field(NIVL, "10")
  field(TEVL, "11")
  field(ELVL, "12")
  field(TVVL, "13")
  field(TTVL, "14")
  field(ZRST, "10^3 low noise")
  field(ONST, "10^4 low noise")
  field(TWST, "10^5 low noise")
  field(THST, "10^6 low noise")
  field(FRST, "10^7 low noise")
  field(FVST, "10^8 low noise")
  field(SXST, "10^9 low noise")
  field(SVST, "10^5 high speed")
  field(EIST, "10^6 high speed")
  field(NIST, "10^7 high speed")
  field(TEST, "10^8 high speed")
  field(ELST, "10^9 high speed")
  field(TVST, "10^10 high spd")
  field(TTST, "10^11 high spd")
  field(DESC, "Gain selection")
  field(SCAN, ".2 second")
}

record(ai, "$(user):testFemtoIn") {
  field(SCAN, ".1 second")
  field(DTYP, "Soft Channel")
  field(INP, "$(user):function")
  field(PREC, "15")
}

record(calc, "$(user):GAIN:CALC") {
  field(SCAN, ".1 second")
  field(FLNK, "$(user):GAIN:CALC:LIMIT")
  field(CALC, "(A<7)?((10^A)*(C*(10^12)))*B:((10^(A-6))*(C*(10^12)))*B")
  field(INPA, "$(user):testMBBO.RVAL")
  field(INPB, "$(user):testFemtoIn")
  field(INPC, "$(user):CONSTANT")
}

record(calc, "$(user):GAIN:CALC:LIMIT") {
  field(FLNK, "$(user):FLUX")
  field(CALC, "A>0?A:0")
  field(INPA, "$(user):GAIN:CALC")
}


record(ao, "$(user):FLUX") {
  field(DOL, "$(user):GAIN:CALC:LIMIT")
  field(OMSL, "closed_loop")
  field(PREC, "3")
  field(EGU, "E12 ph/s")
}

record(ai, "$(user):CONSTANT") {
  field(DTYP, "Soft Channel")
}

#! Further lines contain data used by VisualDCT
#! View(1505,1474,0.8)
#! Record("$(user):function",1920,1887,0,0,"$(user):function")
#! Field("$(user):function.INPA",16777215,1,"$(user):function.INPA")
#! Link("$(user):function.INPA","$(user):counter.VAL")
#! Field("$(user):function.VAL",16777215,1,"$(user):function.VAL")
#! Record("$(user):counter",2160,1887,0,0,"$(user):counter")
#! Field("$(user):counter.VAL",16777215,1,"$(user):counter.VAL")
#! Field("$(user):counter.FLNK",16777215,0,"$(user):counter.FLNK")
#! Link("$(user):counter.FLNK","$(user):function")
#! Field("$(user):counter.INPA",16777215,0,"$(user):counter.INPA")
#! Link("$(user):counter.INPA","$(user):counter.VAL")
#! Record("$(user):testMBBO",2180,2152,0,1,"$(user):testMBBO")
#! Field("$(user):testMBBO.RVAL",16777215,1,"$(user):testMBBO.RVAL")
#! Record("$(user):testFemtoIn",2560,2007,0,1,"$(user):testFemtoIn")
#! Field("$(user):testFemtoIn.INP",16777215,0,"$(user):testFemtoIn.INP")
#! Link("$(user):testFemtoIn.INP","$(user):function.VAL")
#! Field("$(user):testFemtoIn.VAL",16777215,0,"$(user):testFemtoIn.VAL")
#! Record("$(user):gainCalc",2560,2199,0,1,"$(user):gainCalc")
#! Field("$(user):gainCalc.INPA",16777215,0,"$(user):gainCalc.INPA")
#! Link("$(user):gainCalc.INPA","$(user):testMBBO.RVAL")
#! Field("$(user):gainCalc.FLNK",16777215,1,"$(user):gainCalc.FLNK")
#! Link("$(user):gainCalc.FLNK","$(user):gainDisplay")
#! Field("$(user):gainCalc.INPB",16777215,0,"$(user):gainCalc.INPB")
#! Link("$(user):gainCalc.INPB","$(user):testFemtoIn.VAL")
#! Field("$(user):gainCalc.INPC",16777215,0,"$(user):gainCalc.INPC")
#! Link("$(user):gainCalc.INPC","$(user):gainConstant.VAL")
#! Field("$(user):gainCalc.VAL",16777215,1,"$(user):gainCalc.VAL")
#! Record("$(user):gainDisplay",2860,2195,0,0,"$(user):gainDisplay")
#! Field("$(user):gainDisplay.DOL",16777215,0,"$(user):gainDisplay.DOL")
#! Link("$(user):gainDisplay.DOL","$(user):gainCalc.VAL")
#! Record("$(user):gainConstant",2540,2609,0,1,"$(user):gainConstant")
#! Field("$(user):gainConstant.VAL",16777215,0,"$(user):gainConstant.VAL")
